# ============================================================================
# JDBC ADAPTER Configuration - Development Environment
# ============================================================================
# This file contains JDBC Adapter connection configurations for WmJDBCAdapter.
# These connections are used by business integration services.
#
# Usage:
#   helm upgrade --install wm-msr ./msr-helm \
#     -f values-dev.yaml \
#     -f adapters/values-jdbc-adapter-dev.yaml \
#     -n webmethods
#
# Configuration approach:
#   - username: Stored in values file (not sensitive)
#   - password: Retrieved from Azure Key Vault via secretName
#   - Other connection details: Stored in values file
#
# Password stored in Azure Key Vault: dev-jdbcadapter-<connection>-password
# ============================================================================

jdbcAdapter:
  enabled: true
  connections:
    # -------------------------------------------------------------------------
    # Primary Azure SQL Database Connection
    # -------------------------------------------------------------------------
    - name: "mssql_db_connection"
      description: "Azure SQL Database Connection for Integration Services"
      packageName: "AbTest"
      folderName: "AbTest"
      connectionType: "JDBC Adapter Connection"
      connectionFactoryInterface: "com.wm.adapter.wmjdbc.JDBCConnectionFactory"
      driverAlias: "Microsoft SQL Server Driver"
      dataSourceClass: "com.microsoft.sqlserver.jdbc.SQLServerDataSource"
      # Connection details (in values file - not sensitive)
      serverName: "wm-sql-abi-dev.database.windows.net"
      databaseName: "isinternal"
      portNumber: 1433
      networkProtocol: "tcp"
      username: "wmadmin"                              # Username in values file
      secretName: "jdbcadapter-mssql-password"         # Key Vault: dev-jdbcadapter-mssql-password
      passwordEnvVar: "JDBC_ADAPTER_MSSQL_PASSWORD"    # Environment variable for password
      otherProperties: "encrypt=true;trustServerCertificate=true;loginTimeout=30"
      transactionType: "LOCAL_TRANSACTION"
      # Connection pool settings
      minPoolSize: 1
      maxPoolSize: 10
      poolIncrementSize: 1
      blockTimeout: 1000
      expireTimeout: 1000
      startupRetryCount: 0
      startupBackoffSecs: 10

    # -------------------------------------------------------------------------
    # Add more JDBC connections below as needed
    # -------------------------------------------------------------------------
    # - name: "oracle_db_connection"
    #   description: "Oracle Database Connection"
    #   packageName: "MyPackage"
    #   folderName: "connections"
    #   connectionType: "JDBC Adapter Connection"
    #   connectionFactoryInterface: "com.wm.adapter.wmjdbc.JDBCConnectionFactory"
    #   driverAlias: "Oracle Thin Driver"
    #   dataSourceClass: "oracle.jdbc.pool.OracleDataSource"
    #   serverName: "oracle-server.example.com"
    #   databaseName: "ORCL"
    #   portNumber: 1521
    #   networkProtocol: "tcp"
    #   username: "oracle_user"                        # Username in values file
    #   secretName: "jdbcadapter-oracle-password"      # Key Vault: dev-jdbcadapter-oracle-password
    #   passwordEnvVar: "JDBC_ADAPTER_ORACLE_PASSWORD" # Environment variable for password
    #   otherProperties: ""
    #   transactionType: "LOCAL_TRANSACTION"
    #   minPoolSize: 1
    #   maxPoolSize: 10
    #   poolIncrementSize: 1
    #   blockTimeout: 1000
    #   expireTimeout: 1000
    #   startupRetryCount: 0
    #   startupBackoffSecs: 10
